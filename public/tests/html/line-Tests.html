<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Line Chart Tests</title>

        <link rel="stylesheet" media="screen" href="../lib/infusion/lib/qunit/css/qunit.css" />

        <script src="../lib/infusion/lib/qunit/js/qunit.js"></script>
        <script src="../../src/lib/infusion/infusion-custom.js"></script>
        <script src="../../src/lib/ext/d3/d3.js"></script>
        <script src="../lib/infusion/test-core/jqUnit/js/jqUnit.js"></script>
        <script src="../lib/infusion/test-core/jqUnit/js/jqUnit-browser.js"></script>
        <script src="../lib/infusion/test-core/utils/js/IoCTestUtils.js"></script>

        <script src="../../src/js/d3Utils.js"></script>
        <script src="../../src/js/d3ViewComponent.js"></script>
        <script src="../../src/js/valueBinding.js"></script>
        <script src="../../src/js/percentage.js"></script>
        <script src="../../src/js/transformations.js"></script>
        <script src="../../src/js/totalRelaying.js"></script>
        <script src="../../src/js/line.js"></script>
        <script src="../js/lineTests.js"></script>



        <style>
        .floec-ca-lineChart-y-axis line {
          stroke: black;
          opacity: 0.2;
        }

        .floec-ca-lineChart-y-axis text, .floec-ca-lineChart-x-axis text {
            font-family: sans-serif;
            font-size: 11px;
        }

        .floec-ca-lineChart-chartLine-area {
            opacity: 0.2;
            fill: black;
        }

        </style>

    </head>

    <body id="body">
        <h1 id="qunit-header">Line Chart Tests</h1>
        <h2 id="qunit-banner"></h2>
        <div id="qunit-testrunner-toolbar"></div>
        <h2 id="qunit-userAgent"></h2>
        <ol id="qunit-tests"></ol>

        <!-- Test HTML -->
        <h2>floec-ca-lineChart</h2>
        <div class="floec-ca-lineChart"></div>

        <h2>floec-ca-lineChart-area</h2>
        <div class="floec-ca-lineChart-area"></div>

        <h2>floec-ca-lineChart-multi</h2>
        <div class="floec-ca-lineChart-multi"></div>

        <h2>First Discovery Server - Commits</h2>
        <div class="floec-ca-lineChart-commits"></div>

        <h2>First Discovery Server - Contributions</h2>
        <div class="floec-ca-lineChart-contributions"></div>

        <script>
            createCommitsChart = function(data) {
                var commitDataSet = fluid.transform(data.events.reverse(), function(dataPoint) {
                    return {
                        "date": dataPoint.timestamp,
                        "value": dataPoint.value
                    }
                });
                console.table(commitDataSet);
                floe.tests.chartAuthoring.lineChart.chart(".floec-ca-lineChart-commits", {
                    model: {
                        dataSet: commitDataSet
                    },
                    lineOptions: {
                        // interpolation: "cardinal",
                        // addArea: true
                    }
                });
            }

            createContribsChart = function(data) {
                var contribsDataSet = fluid.transform(data.events.reverse(), function(dataPoint) {
                    return {
                        "date": dataPoint.timestamp,
                        "value": dataPoint.value
                    }
                });
                console.table(contribsDataSet);
                floe.tests.chartAuthoring.lineChart.chart(".floec-ca-lineChart-contributions", {
                    model: {
                        dataSet: contribsDataSet
                    },
                    lineOptions: {
                        interpolation: "cardinal",
                        addArea: true
                    }
                });
            }

        </script>

        <script src="http://localhost:3000/a/fluid-project/infusion/commits?callback=createCommitsChart"></script>

        <script src="http://localhost:3000/a/fluid-project/infusion/contributors?callback=createContribsChart"></script>

    </body>
</html>
